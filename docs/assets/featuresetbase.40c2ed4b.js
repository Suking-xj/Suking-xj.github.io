import{f8 as e,fD as n,fQ as t,cR as r}from"./vendor.abf366c9.js";import{J as i,M as a,K as s,s as l,i as o,l as f,W as c,Z as u,F as d,X as m,E as p,k as y,ah as g,ai as h,a3 as I,aj as F}from"./arcadeUtils.cfa97e72.js";import{b as E,D,r as w,q as b,y as N,_ as A,e as x,a as S,c as $,A as T,j as L,T as v,k as O,d as R,C as j,v as C,E as M,w as k}from"./featureSetUtils.12ded806.js";import{WhereClause as P}from"./WhereClause.4858d1dd.js";import{c as G,E as B}from"./SpatialFilter.e66e3d74.js";import"./number.89bc4034.js";import"./FeatureSetReader.e8820b66.js";import"./centroid.93c1b848.js";import"./MD5.1ef35834.js";import"./_commonjsHelpers.f2a458db.js";import"./geometryEngineAsync.c8d94fea.js";function V(t,r,i){const a=t.getVariables();if(a.length>0){const n=[];for(let e=0;e<a.length;e++){const t={name:a[e]};n.push(r.evaluateIdentifier(i,t))}return e(n).then((e=>{const n={};for(let t=0;t<a.length;t++)n[a[t]]=e[t];return t.parameters=n,t}))}return n(t)}function H(e,n,t=null){for(const r in e)if(r.toLowerCase()===n.toLowerCase())return e[r];return t}function z(e){if(null===e)return null;const n={type:H(e,"type",""),name:H(e,"name","")};if("range"===n.type)n.range=H(e,"range",[]);else{n.codedValues=[];for(const t of H(e,"codedValues",[]))n.codedValues.push({name:H(t,"name",""),code:H(t,"code",null)})}return n}function W(e){if(null===e)return null;const n={},t=H(e,"wkt",null);null!==t&&(n.wkt=t);const r=H(e,"wkid",null);return null!==r&&(n.wkid=r),n}function _(e){if(null===e)return null;const n={hasZ:H(e,"hasz",!1),hasM:H(e,"hasm",!1)},t=H(e,"spatialreference",null);t&&(n.spatialReference=W(t));const r=H(e,"x",null);if(null!==r)return n.x=r,n.y=H(e,"y",null),n;const i=H(e,"rings",null);if(null!==i)return n.rings=i,n;const a=H(e,"paths",null);if(null!==a)return n.paths=a,n;const s=H(e,"points",null);if(null!==s)return n.points=s,n;for(const l of["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]){const t=H(e,l,null);null!==t&&(n[l]=t)}return n}function J(J){"async"===J.mode&&(J.functions.getuser=function(e,n){return J.standardFunctionAsync(e,n,((n,t,r)=>{i(r,1,2);let c=a(r[1],""),u=!0===c;if(c=!0===c||!1===c?"":s(c),r[0]instanceof l){let n=null;return e.services&&e.services.portal&&(n=e.services.portal),n=E(r[0],n),D(n,c,u).then((e=>{if(e){const n=JSON.parse(JSON.stringify(e));for(const e of["lastLogin","created","modified"])void 0!==n[e]&&null!==n[e]&&(n[e]=new Date(n[e]));return o.convertObjectToArcadeDictionary(n)}return null}))}let d=null;if(f(r[0])&&(d=r[0]),d)return u=!1,c?null:d.load().then((()=>d.getOwningSystemUrl())).then((n=>{if(!n)return c?null:d.getIdentityUser().then((e=>e?o.convertObjectToArcadeDictionary({username:e}):null));let t=null;return e.services&&e.services.portal&&(t=e.services.portal),t=E(new l(n),t),D(t,c,u).then((e=>{if(e){const n=JSON.parse(JSON.stringify(e));for(const e of["lastLogin","created","modified"])void 0!==n[e]&&null!==n[e]&&(n[e]=new Date(n[e]));return o.convertObjectToArcadeDictionary(n)}return null}))}));throw new Error("Invalid Parameter")}))},J.signatures.push({name:"getuser",min:"1",max:"2"}),J.functions.featuresetbyid=function(e,n){return J.standardFunctionAsync(e,n,((e,n,t)=>{if(i(t,2,4),t[0]instanceof w){const e=s(t[1]);let n=a(t[2],null);const r=c(a(t[3],!0));if(null===n&&(n=["*"]),!1===u(n))throw new Error("Invalid Parameter");return t[0].featureSetById(e,r,n)}throw new Error("Invalid Parameter")}))},J.signatures.push({name:"featuresetbyid",min:"2",max:"4"}),J.functions.featuresetbyportalitem=function(e,n){return J.standardFunctionAsync(e,n,((n,t,r)=>{if(i(r,2,5),null===r[0])throw new Error("Portal is required");if(r[0]instanceof l){const n=s(r[1]),t=s(r[2]);let i=a(r[3],null);const l=c(a(r[4],!0));if(null===i&&(i=["*"]),!1===u(i))throw new Error("Invalid Parameter");let o=null;return e.services&&e.services.portal&&(o=e.services.portal),o=E(r[0],o),b(n,t,e.spatialReference,i,l,o,e.lrucache,e.interceptor)}if(!1===d(r[0]))throw new Error("Portal is required");const o=s(r[0]),f=s(r[1]);let m=a(r[2],null);const p=c(a(r[3],!0));if(null===m&&(m=["*"]),!1===u(m))throw new Error("Invalid Parameter");if(e.services&&e.services.portal)return b(o,f,e.spatialReference,m,p,e.services.portal,e.lrucache,e.interceptor);throw new Error("Portal is required")}))},J.signatures.push({name:"featuresetbyportalitem",min:"2",max:"5"}),J.functions.featuresetbyname=function(e,n){return J.standardFunctionAsync(e,n,((e,n,t)=>{if(i(t,2,4),t[0]instanceof w){const e=s(t[1]);let n=a(t[2],null);const r=c(a(t[3],!0));if(null===n&&(n=["*"]),!1===u(n))throw new Error("Invalid Parameter");return t[0].featureSetByName(e,r,n)}throw new Error("Invalid Parameter")}))},J.signatures.push({name:"featuresetbyname",min:"2",max:"4"}),J.functions.featureset=function(e,n){return J.standardFunction(e,n,((n,t,r)=>{i(r,1,1);let a=r[0];const s={layerDefinition:{geometryType:"",objectIdField:"",globalIdField:"",typeIdField:"",fields:[]},featureSet:{geometryType:"",features:[]}};if(d(a))a=JSON.parse(a),void 0!==a.layerDefinition?(s.layerDefinition=a.layerDefinition,s.featureSet=a.featureSet,a.layerDefinition.spatialReference&&(s.layerDefinition.spatialReference=a.layerDefinition.spatialReference)):(s.featureSet.features=a.features,s.featureSet.geometryType=a.geometryType,s.layerDefinition.geometryType=s.featureSet.geometryType,s.layerDefinition.objectIdField=a.objectIdFieldName,s.layerDefinition.typeIdField=a.typeIdFieldName,s.layerDefinition.globalIdField=a.globalIdFieldName,s.layerDefinition.fields=a.fields,a.spatialReference&&(s.layerDefinition.spatialReference=a.spatialReference));else{if(!(r[0]instanceof o))throw new Error("Invalid Parameter");{a=JSON.parse(r[0].castToText());const e=H(a,"layerdefinition");if(null!==e){s.layerDefinition.geometryType=H(e,"geometrytype",""),s.featureSet.geometryType=s.layerDefinition.geometryType,s.layerDefinition.globalIdField=H(e,"globalidfield",""),s.layerDefinition.objectIdField=H(e,"objectidfield",""),s.layerDefinition.typeIdField=H(e,"typeidfield","");const n=H(e,"spatialreference",null);n&&(s.layerDefinition.spatialReference=W(n));for(const r of H(e,"fields",[])){const e={name:H(r,"name",""),alias:H(r,"alias",""),type:H(r,"type",""),nullable:H(r,"nullable",!0),editable:H(r,"editable",!0),length:H(r,"length",null),domain:z(H(r,"domain"))};s.layerDefinition.fields.push(e)}const t=H(a,"featureset",null);if(t){const e={};for(const n of s.layerDefinition.fields)e[n.name.toLowerCase()]=n.name;for(const n of H(t,"features",[])){const t={},r=H(n,"attributes",{});for(const n in r)t[e[n.toLowerCase()]]=r[n];s.featureSet.features.push({attributes:t,geometry:_(H(n,"geometry",null))})}}}else{s.layerDefinition.geometryType=H(a,"geometrytype",""),s.featureSet.geometryType=s.layerDefinition.geometryType,s.layerDefinition.objectIdField=H(a,"objectidfieldname",""),s.layerDefinition.typeIdField=H(a,"typeidfieldname","");const e=H(a,"spatialreference",null);e&&(s.layerDefinition.spatialReference=W(e));for(const t of H(a,"fields",[])){const e={name:H(t,"name",""),alias:H(t,"alias",""),type:H(t,"type",""),nullable:H(t,"nullable",!0),editable:H(t,"editable",!0),length:H(t,"length",null),domain:z(H(t,"domain"))};s.layerDefinition.fields.push(e)}const n={};for(const t of s.layerDefinition.fields)n[t.name.toLowerCase()]=t.name;for(const t of H(a,"features",[])){const e={},r=H(t,"attributes",{});for(const t in r)e[n[t.toLowerCase()]]=r[t];s.featureSet.features.push({attributes:e,geometry:_(H(t,"geometry",null))})}}}}if(!1===function(e){return!!e.layerDefinition&&!!e.featureSet&&!1!==function(e,n){for(const t of n)if(t===e)return!0;return!1}(e.layerDefinition.geometryType,["","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])&&null!==e.layerDefinition.objectIdField&&""!==e.layerDefinition.objectIdField&&!1!==u(e.layerDefinition.fields)&&!1!==u(e.featureSet.features)}(s))throw new Error("Invalid Parameter");return N.create(s,e.spatialReference)}))},J.signatures.push({name:"featureset",min:"1",max:"1"}),J.functions.filter=function(t,r){return J.standardFunctionAsync(t,r,((r,a,s)=>(i(s,2,2),f(s[0])?s[0].load().then((r=>{const i=P.create(s[1],r.getFieldsIndex()),a=i.getVariables();if(a.length>0){const n=[];for(let e=0;e<a.length;e++){const r={name:a[e]};n.push(J.evaluateIdentifier(t,r))}return e(n).then((e=>{const n={};for(let t=0;t<a.length;t++)n[a[t]]=e[t];return i.parameters=n,new A({parentfeatureset:s[0],whereclause:i})}))}return n(new A({parentfeatureset:s[0],whereclause:i}))})):J.failDefferred("Filter cannot accept this parameter type"))))},J.signatures.push({name:"filter",min:"2",max:"2"}),J.functions.orderby=function(e,t){return J.standardFunctionAsync(e,t,((e,t,r)=>{if(i(r,2,2),f(r[0])){const e=new x(r[1]);return n(new S({parentfeatureset:r[0],orderbyclause:e}))}return J.failDefferred("Order cannot accept this parameter type")}))},J.signatures.push({name:"orderby",min:"2",max:"2"}),J.functions.top=function(e,t){return J.standardFunctionAsync(e,t,((e,t,r)=>(i(r,2,2),f(r[0])?n(new $({parentfeatureset:r[0],topnum:r[1]})):u(r[0])?m(r[1])>=r[0].length?r[0].slice(0):r[0].slice(0,m(r[1])):p(r[0])?m(r[1])>=r[0].length()?r[0].slice(0):r[0].slice(0,m(r[1])):J.failDefferred("Top cannot accept this parameter type"))))},J.signatures.push({name:"top",min:"2",max:"2"}),J.functions.first=function(e,t){return J.standardFunctionAsync(e,t,((e,t,r)=>(i(r,1,1),f(r[0])?r[0].first(e.abortSignal).then((e=>{if(null!==e){const n=y.createFromGraphicLikeObject(e.geometry,e.attributes,r[0]);n._underlyingGraphic=e,e=n}return e})):u(r[0])?0===r[0].length?n(null):n(r[0][0]):p(r[0])?0===r[0].length()?n(null):n(r[0].get(0)):null)))},J.signatures.push({name:"first",min:"1",max:"1"}),J.functions.attachments=function(e,n){return J.standardFunctionAsync(e,n,((n,r,a)=>{i(a,1,2);const s={minsize:-1,maxsize:-1,types:null};if(a.length>1)if(a[1]instanceof o){if(a[1].hasField("minsize")&&(s.minsize=m(a[1].field("minsize"))),a[1].hasField("maxsize")&&(s.maxsize=m(a[1].field("maxsize"))),a[1].hasField("types")){const e=g(a[1].field("types"),!1);e.length>0&&(s.types=e)}}else if(null!==a[1])throw new Error("Invalid Parameter");if(a[0]instanceof y){let n=a[0]._layer;return n instanceof t&&(n=T(n,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===n||!1===f(n)?[]:n.load().then((()=>n.queryAttachments(a[0].field(n.objectIdField),s.minsize,s.maxsize,s.types)))}if(null===a[0])return[];throw new Error("Invalid Parameter")}))},J.signatures.push({name:"attachments",min:"1",max:"2"}),J.functions.featuresetbyrelationshipname=function(e,n){return J.standardFunctionAsync(e,n,((n,r,l)=>{i(l,2,4);const o=l[0],d=s(l[1]);let m=a(l[2],null);const p=c(a(l[3],!0));if(null===m&&(m=["*"]),!1===u(m))throw new Error("Invalid Parameter");if(null===l[0])return null;if(!(l[0]instanceof y))throw new Error("Invalid Parameter");let g=o._layer;return g instanceof t&&(g=T(g,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===g||!1===f(g)?null:g.load().then((n=>{const t=n.relationshipMetaData().filter((e=>e.name===d));if(0===t.length)return null;if(void 0!==t[0].relationshipTableId&&null!==t[0].relationshipTableId&&t[0].relationshipTableId>-1)return L(n,t[0],o.field(n.objectIdField),n.spatialReference,m,p,e.lrucache,e.interceptor);let r=n.serviceUrl();return r?(r="/"===r.charAt(r.length-1)?r+t[0].relatedTableId.toString():r+"/"+t[0].relatedTableId.toString(),v(r,n.spatialReference,m,p,e.lrucache,e.interceptor).then((e=>e.load().then((()=>e.relationshipMetaData())).then((r=>{if(r=r.filter((e=>e.id===t[0].id)),!1===o.hasField(t[0].keyField)||null===o.field(t[0].keyField))return n.getFeatureByObjectId(o.field(n.objectIdField),[t[0].keyField]).then((n=>{if(n){const i=P.create(r[0].keyField+"= @id",e.getFieldsIndex());return i.parameters={id:n.attributes[t[0].keyField]},e.filter(i)}return new G({parentfeatureset:e})}));const i=P.create(r[0].keyField+"= @id",e.getFieldsIndex());return i.parameters={id:o.field(t[0].keyField)},e.filter(i)}))))):null}))}))},J.signatures.push({name:"featuresetbyrelationshipname",min:"2",max:"4"}),J.functions.featuresetbyassociation=function(e,n){return J.standardFunctionAsync(e,n,((n,l,o)=>{i(o,2,3);const c=o[0],u=s(a(o[1],"")).toLowerCase(),m=d(o[2])?s(o[2]):null;if(null===o[0])return null;if(!(o[0]instanceof y))throw new Error("Invalid Parameter");let p=c._layer;return p instanceof t&&(p=T(p,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===p||!1===f(p)?null:p.load().then((()=>{const n=p.serviceUrl();return O(n,e.spatialReference)})).then((e=>{let n=null,t=null,i=!1;if(null!==m&&""!==m&&void 0!==m){for(const n of e.terminals)n.terminalName===m&&(t=n.terminalId);null===t&&(i=!0)}const a=e.associations.getFieldsIndex(),s=a.get("TOGLOBALID").name,l=a.get("FROMGLOBALID").name,o=a.get("TOTERMINALID").name,f=a.get("FROMTERMINALID").name,d=a.get("FROMNETWORKSOURCEID").name,y=a.get("TONETWORKSOURCEID").name,g=a.get("ASSOCIATIONTYPE").name,F=a.get("ISCONTENTVISIBLE").name,E=a.get("OBJECTID").name;for(const r of p.fields)if("global-id"===r.type){n=c.field(r.name);break}let D=null,w=new R(new r({name:"percentalong",alias:"percentalong",type:"double"}),P.create("0",e.associations.getFieldsIndex())),b=new R(new r({name:"side",alias:"side",type:"string"}),P.create("''",e.associations.getFieldsIndex()));const N="globalid",A="globalId",x={};for(const r in e.lkp)x[r]=e.lkp[r].sourceId;const S=new j(new r({name:"classname",alias:"classname",type:"string"}),null,x);let $="";switch(u){case"midspan":{$=`((${s}='${n}') OR ( ${l}='${n}')) AND (${g} IN (5))`,S.codefield=P.create(`CASE WHEN (${s}='${n}') THEN ${d} ELSE ${y} END`,e.associations.getFieldsIndex());const t=I(M.findField(e.associations.fields,l));t.name=N,t.alias=N,D=new R(t,P.create(`CASE WHEN (${l}='${n}') THEN ${s} ELSE ${l} END`,e.associations.getFieldsIndex())),w=e.unVersion>=4?new k(M.findField(e.associations.fields,a.get("PERCENTALONG").name)):new R(new r({name:"percentalong",alias:"percentalong",type:"double"}),P.create("0",e.associations.getFieldsIndex()));break}case"junctionedge":{$=`((${s}='${n}') OR ( ${l}='${n}')) AND (${g} IN (4,6))`,S.codefield=P.create(`CASE WHEN (${s}='${n}') THEN ${d} ELSE ${y} END`,e.associations.getFieldsIndex());const t=I(M.findField(e.associations.fields,l));t.name=N,t.alias=N,D=new R(t,P.create(`CASE WHEN (${l}='${n}') THEN ${s} ELSE ${l} END`,e.associations.getFieldsIndex())),b=new R(new r({name:"side",alias:"side",type:"string"}),P.create(`CASE WHEN (${g}=4) THEN 'from' ELSE 'to' END`,e.associations.getFieldsIndex()));break}case"connected":{let r=`${s}='@T'`,i=`${l}='@T'`;null!==t&&(r+=` AND ${o}=@A`,i+=` AND ${f}=@A`),$="(("+r+") OR ("+i+"))",$=h($,"@T",n),r=h(r,"@T",n),null!==t&&(r=h(r,"@A",t.toString()),$=h($,"@A",t.toString())),S.codefield=P.create("CASE WHEN "+r+` THEN ${d} ELSE ${y} END`,e.associations.getFieldsIndex());const a=I(M.findField(e.associations.fields,l));a.name=N,a.alias=N,D=new R(a,P.create("CASE WHEN "+r+` THEN ${l} ELSE ${s} END`,e.associations.getFieldsIndex()));break}case"container":$=`${s}='${n}' AND ${g} = 2`,null!==t&&($+=` AND ${o} = `+t.toString()),S.codefield=d,$="( "+$+" )",D=new C(M.findField(e.associations.fields,l),N,N);case"content":$=`(${l}='${n}' AND ${g} = 2)`,null!==t&&($+=` AND ${f} = `+t.toString()),S.codefield=y,$="( "+$+" )",D=new C(M.findField(e.associations.fields,s),N,N);break;case"structure":$=`(${s}='${n}' AND ${g} = 3)`,null!==t&&($+=` AND ${o} = `+t.toString()),S.codefield=d,$="( "+$+" )",D=new C(M.findField(e.associations.fields,l),N,A);break;case"attached":$=`(${l}='${n}' AND ${g} = 3)`,null!==t&&($+=` AND ${f} = `+t.toString()),S.codefield=y,$="( "+$+" )",D=new C(M.findField(e.associations.fields,s),N,A);break;default:throw new Error("Invalid Parameter")}return i&&($="1 <> 1"),new M({parentfeatureset:e.associations,adaptedFields:[new k(M.findField(e.associations.fields,E)),new k(M.findField(e.associations.fields,F)),D,b,S,w],extraFilter:$?P.create($,e.associations.getFieldsIndex()):null})}))}))},J.signatures.push({name:"featuresetbyassociation",min:"2",max:"6"}),J.functions.groupby=function(t,r){return J.standardFunctionAsync(t,r,((r,a,l)=>(i(l,3,3),f(l[0])?l[0].load().then((r=>{const i=[],a=[];let f=!1,c=[];if(d(l[1]))c.push(l[1]);else if(l[1]instanceof o)c.push(l[1]);else if(u(l[1]))c=l[1];else{if(!p(l[1]))return J.failDefferred("Illegal Value: GroupBy");c=l[1].toArray()}for(const e of c)if(d(e)){const n=P.create(s(e),r.getFieldsIndex()),t=!0===B(n)?s(e):"%%%%FIELDNAME";i.push({name:t,expression:n}),"%%%%FIELDNAME"===t&&(f=!0)}else{if(!(e instanceof o))return J.failDefferred("Illegal Value: GroupBy");{const n=e.hasField("name")?e.field("name"):"%%%%FIELDNAME",t=e.hasField("expression")?e.field("expression"):"";if("%%%%FIELDNAME"===n&&(f=!0),!n)return J.failDefferred("Illegal Value: GroupBy");i.push({name:n,expression:P.create(t||n,r.getFieldsIndex())})}}if(c=[],d(l[2]))c.push(l[2]);else if(u(l[2]))c=l[2];else if(p(l[2]))c=l[2].toArray();else{if(!(l[2]instanceof o))return J.failDefferred("Illegal Value: GroupBy");c.push(l[2])}for(const e of c){if(!(e instanceof o))return J.failDefferred("Illegal Value: GroupBy");{const n=e.hasField("name")?e.field("name"):"",t=e.hasField("statistic")?e.field("statistic"):"",i=e.hasField("expression")?e.field("expression"):"";if(!n||!t||!i)return J.failDefferred("Illegal Value: GroupBy");a.push({name:n,statistic:t.toLowerCase(),expression:P.create(i,r.getFieldsIndex())})}}if(f){const e={};for(const t of r.fields)e[t.name.toLowerCase()]=1;for(const t of i)"%%%%FIELDNAME"!==t.name&&(e[t.name.toLowerCase()]=1);for(const t of a)"%%%%FIELDNAME"!==t.name&&(e[t.name.toLowerCase()]=1);let n=0;for(const t of i)if("%%%%FIELDNAME"===t.name){for(;1===e["field_"+n.toString()];)n++;e["field_"+n.toString()]=1,t.name="FIELD_"+n.toString()}}const m=[];for(const e of i)m.push(V(e.expression,J,t));for(const e of a)m.push(V(e.expression,J,t));return m.length>0?e(m).then((()=>n(l[0].groupby(i,a)))):n(l[0].groupby(i,a))})):J.failDefferred("Illegal Value: GroupBy"))))},J.signatures.push({name:"groupby",min:"3",max:"3"}),J.functions.distinct=function(t,r){return J.standardFunctionAsync(t,r,((r,a,l)=>f(l[0])?(i(l,2,2),l[0].load().then((r=>{const i=[];let a=[];if(d(l[1]))a.push(l[1]);else if(l[1]instanceof o)a.push(l[1]);else if(u(l[1]))a=l[1];else{if(!p(l[1]))return J.failDefferred("Illegal Value: GroupBy");a=l[1].toArray()}let f=!1;for(const e of a)if(d(e)){const n=P.create(s(e),r.getFieldsIndex()),t=!0===B(n)?s(e):"%%%%FIELDNAME";i.push({name:t,expression:n}),"%%%%FIELDNAME"===t&&(f=!0)}else{if(!(e instanceof o))return J.failDefferred("Illegal Value: GroupBy");{const n=e.hasField("name")?e.field("name"):"%%%%FIELDNAME",t=e.hasField("expression")?e.field("expression"):"";if("%%%%FIELDNAME"===n&&(f=!0),!n)return J.failDefferred("Illegal Value: GroupBy");i.push({name:n,expression:P.create(t||n,r.getFieldsIndex())})}}if(f){const e={};for(const t of r.fields)e[t.name.toLowerCase()]=1;for(const t of i)"%%%%FIELDNAME"!==t.name&&(e[t.name.toLowerCase()]=1);let n=0;for(const t of i)if("%%%%FIELDNAME"===t.name){for(;1===e["field_"+n.toString()];)n++;e["field_"+n.toString()]=1,t.name="FIELD_"+n.toString()}}const c=[];for(const e of i)c.push(V(e.expression,J,t));return c.length>0?e(c).then((()=>n(l[0].groupby(i,[])))):n(l[0].groupby(i,[]))}))):function(e,n,t,r){if(1===r.length){if(u(r[0]))return F(e,r[0],-1);if(p(r[0]))return F(e,r[0].toArray(),-1)}return F(e,r,-1)}("distinct",0,0,l)))})}export{J as registerFunctions};
