var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(r,t,i)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i,n=(e,r)=>{for(var t in r||(r={}))s.call(r,t)&&o(e,t,r[t]);if(i)for(var t of i(r))a.call(r,t)&&o(e,t,r[t]);return e};import{ae as l,af as p,_ as u,dQ as c,dp as y,bG as d,d1 as f,ag as m,dA as B,dR as b,bF as v,a5 as g,dS as h,d0 as P,aj as O,dT as j}from"./vendor.74d5941c.js";import{c as R,a as S,l as A,u as N,d as k,n as C,o as F,b as w}from"./NAServiceDescription.7a69545e.js";import"./GPMessage.8bfedb6d.js";function J(e){return b.fromJSON(e).features.map((e=>e.geometry))}let T=class extends B{constructor(e){super(e),this.directions=null,this.facilities=null,this.incidents=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routes=null}readFacilities(e){return J(e)}readIncidents(e){return J(e)}readPointBarriers(e,r){return J(r.barriers)}readPolylineBarriers(e){return J(e)}readPolygonBarriers(e){return J(e)}readRoutes(e){return(r=e).features.map((e=>{const t=v.fromJSON(r.spatialReference),i=f.fromJSON(e);return g(i.geometry)&&(i.geometry.spatialReference=t),i}));var r}};l([p({type:[R]})],T.prototype,"directions",void 0),l([p({type:[u]})],T.prototype,"facilities",void 0),l([c("facilities")],T.prototype,"readFacilities",null),l([p({type:[u]})],T.prototype,"incidents",void 0),l([c("incidents")],T.prototype,"readIncidents",null),l([p({type:[S]})],T.prototype,"messages",void 0),l([p({type:[u]})],T.prototype,"pointBarriers",void 0),l([c("pointBarriers",["barriers"])],T.prototype,"readPointBarriers",null),l([p({type:[y]})],T.prototype,"polylineBarriers",void 0),l([c("polylineBarriers")],T.prototype,"readPolylineBarriers",null),l([p({type:[d]})],T.prototype,"polygonBarriers",void 0),l([c("polygonBarriers")],T.prototype,"readPolygonBarriers",null),l([p({type:[f]})],T.prototype,"routes",void 0),l([c("routes")],T.prototype,"readRoutes",null),T=l([m("esri.tasks.support.ClosestFacilitySolveResult")],T);var x=T;const I=F({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0});let q=class extends(w(j)){constructor(e){super(e),this.url=null}solve(e,i){return async function(e,i,s){const a=[],o=[],l={},p={},u=h(e);return i.incidents&&i.incidents.features&&A(i.incidents.features,o,"incidents.features",l),i.facilities&&i.facilities.features&&A(i.facilities.features,o,"facilities.features",l),i.pointBarriers&&i.pointBarriers.features&&A(i.pointBarriers.features,o,"pointBarriers.features",l),i.polylineBarriers&&i.polylineBarriers.features&&A(i.polylineBarriers.features,o,"polylineBarriers.features",l),i.polygonBarriers&&i.polygonBarriers.features&&A(i.polygonBarriers.features,o,"polygonBarriers.features",l),P(o).then((e=>{for(const r in l){const t=l[r];a.push(r),p[r]=e.slice(t[0],t[1])}return N(p,a)?k(u.path):Promise.resolve({dontCheck:!0})})).then((e=>{("dontCheck"in e?e.dontCheck:e.hasZ)||C(p,a);for(const r in p)p[r].forEach(((e,t)=>{i.get(r)[t].geometry=e}));let o={query:n((l=n({},u.query),c={f:"json"},r(l,t(c))),I.toQueryParams(i))};var l,c;return s&&(o=n(n({},s),o)),O(`${u.path}/solveClosestFacility`,o)})).then((e=>x.fromJSON(e.data)))}(this.url,e,i)}};l([p()],q.prototype,"url",void 0),q=l([m("esri.tasks.ClosestFacilityTask")],q);var D=q;export default D;
