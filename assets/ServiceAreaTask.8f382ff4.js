var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(r,t,s)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,n=(e,r)=>{for(var t in r||(r={}))a.call(r,t)&&o(e,t,r[t]);if(s)for(var t of s(r))i.call(r,t)&&o(e,t,r[t]);return e};import{D as l,E as p,aj as c,cy as u,cw as y,b4 as f,cz as d,F as v,cA as B,cg as m,b3 as g,br as P,cC as b,U as h,cD as A,cE as S}from"./vendor.d5722712.js";import{a as O,l as j,u as k,d as R,n as w,o as N,b as C}from"./NAServiceDescription.314d4f11.js";import"./GPMessage.c793f319.js";function D(e){return e.features.map((r=>{const t=g.fromJSON(e.spatialReference),s=d.fromJSON(r);return P(s.geometry).spatialReference=t,s}))}function E(e){return e.features.map((r=>(r.geometry.spatialReference=e.spatialReference,m(r.geometry))))}let x=class extends B{constructor(e){super(e),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(e){return E(e)}readPointBarriers(e,r){return E(r.barriers)}readPolylineBarriers(e){return E(e)}readPolygonBarriers(e){return E(e)}readIncidents(e,r){return D(r.saPolylines)}readServiceAreaPolygons(e,r){return D(r.saPolygons)}};l([p({type:[c]})],x.prototype,"facilities",void 0),l([u("facilities")],x.prototype,"readFacilities",null),l([p({type:[O]})],x.prototype,"messages",void 0),l([p({type:[c]})],x.prototype,"pointBarriers",void 0),l([u("pointBarriers",["barriers"])],x.prototype,"readPointBarriers",null),l([p({type:[y]})],x.prototype,"polylineBarriers",void 0),l([u("polylineBarriers")],x.prototype,"readPolylineBarriers",null),l([p({type:[f]})],x.prototype,"polygonBarriers",void 0),l([u("polygonBarriers")],x.prototype,"readPolygonBarriers",null),l([p({type:[d]})],x.prototype,"serviceAreaPolylines",void 0),l([u("serviceAreaPolylines",["saPolylines"])],x.prototype,"readIncidents",null),l([p({type:[d]})],x.prototype,"serviceAreaPolygons",void 0),l([u("serviceAreaPolygons",["saPolygons"])],x.prototype,"readServiceAreaPolygons",null),x=l([v("esri.tasks.support.ServiceAreaSolveResult")],x);var F=x;const I=N({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});let J=class extends(C(S)){constructor(e){super(e),this.url=null}solve(e,s){return async function(e,s,a){const i=[],o=[],l={},p={},c=A(e);return s.facilities&&s.facilities.features&&j(s.facilities.features,o,"facilities.features",l),s.pointBarriers&&s.pointBarriers.features&&j(s.pointBarriers.features,o,"pointBarriers.features",l),s.polylineBarriers&&s.polylineBarriers.features&&j(s.polylineBarriers.features,o,"polylineBarriers.features",l),s.polygonBarriers&&s.polygonBarriers.features&&j(s.polygonBarriers.features,o,"polygonBarriers.features",l),b(o).then((e=>{for(const r in l){const t=l[r];i.push(r),p[r]=e.slice(t[0],t[1])}return k(p,i)?R(c.path).catch((()=>({dontCheck:!0}))):Promise.resolve({dontCheck:!0})})).then((e=>{("dontCheck"in e?e.dontCheck:e.hasZ)||w(p,i);for(const r in p)p[r].forEach(((e,t)=>{s.get(r)[t].geometry=e}));let o={query:n((l=n({},c.query),u={f:"json"},r(l,t(u))),I.toQueryParams(s))};var l,u;return a&&(o=n(n({},a),o)),h(`${c.path}/solveServiceArea`,o)})).then((e=>F.fromJSON(e.data)))}(this.url,e,s)}};l([p()],J.prototype,"url",void 0),J=l([v("esri.tasks.ServiceAreaTask")],J);var q=J;export default q;
